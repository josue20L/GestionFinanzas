<h2 class="mb-4">Carga Mensual</h2>

<!-- CSS personalizado para tabs -->
<link rel="stylesheet" href="/css/carga-mensual.css">
<link rel="stylesheet" href="/css/notificaciones/modal-cambios.css">

<!-- Sistema de notificación de cambios -->
<script src="/js/notificaciones/modal-cambios.js"></script>

<!-- Selectores de Empresa y Período -->
<div class="card mb-4">
    <div class="card-body">
        <div class="row g-3 align-items-end">
            <div class="col-md-3">
                <label for="empresa-select" class="form-label">Empresa</label>
                <select id="empresa-select" class="form-select">
                    <option value="">Seleccione una empresa</option>
                </select>
            </div>
            <div class="col-md-3">
                <label for="periodo-select" class="form-label">Período (YYYY-MM)</label>
                <input type="month" id="periodo-select" class="form-control" value="2024-01">
            </div>
            <div class="col-md-6">
                <div class="btn-group w-100">
                    <button type="button" class="btn btn-primary">
                        <i class="bi bi-folder-open me-2"></i> Cargar o Crear
                    </button>
                    <button type="button" class="btn btn-outline-secondary">
                        <i class="bi bi-copy me-2"></i> Copiar Mes Anterior
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Contenedor principal para formularios (inicialmente oculto) -->
<div id="formularios-container" style="display: none;">
    <!-- Navegación por tabs -->
    <ul class="nav nav-tabs mb-4" id="formulariosTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="estado-resultados-tab" data-bs-toggle="tab" data-bs-target="#estado-resultados" type="button" role="tab">
                <i class="bi bi-file-earmark-text me-2"></i>
                <span class="fw-bold">ESTADO DE RESULTADOS</span>
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="balance-general-tab" data-bs-toggle="tab" data-bs-target="#balance-general" type="button" role="tab">
                <i class="bi bi-balance-scale me-2"></i>
                <span class="fw-bold">BALANCE GENERAL</span>
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="flujo-operativo-tab" data-bs-toggle="tab" data-bs-target="#flujo-operativo" type="button" role="tab">
                <i class="bi bi-cash-stack me-2"></i>
                <span class="fw-bold">FLUJO OPERATIVO</span>
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="flujo-corporativo-tab" data-bs-toggle="tab" data-bs-target="#flujo-corporativo" type="button" role="tab">
                <i class="bi bi-building me-2"></i>
                <span class="fw-bold">FLUJO CORPORATIVO</span>
            </button>
        </li>
    </ul>

    <!-- Contenido de los tabs -->
    <div class="tab-content" id="formulariosTabContent">
        <!-- Estado de Resultados -->
        <div class="tab-pane fade show active" id="estado-resultados" role="tabpanel">
            <%- include('estado-resultados') %>
        </div>
        
        <!-- Balance General -->
        <div class="tab-pane fade" id="balance-general" role="tabpanel">
            <%- include('balance-general') %>
        </div>
        
        <!-- Flujo Operativo -->
        <div class="tab-pane fade" id="flujo-operativo" role="tabpanel">
            <%- include('flujo-operativo') %>
        </div>
        
        <!-- Flujo Corporativo -->
        <div class="tab-pane fade" id="flujo-corporativo" role="tabpanel">
            <%- include('flujo-corporativo') %>
        </div>
    </div>
    
    <!-- Botones de acción -->
    <div class="card mt-4">
        <div class="card-body d-flex justify-content-between align-items-center">
            <div class="btn-group">
                <button type="button" class="btn btn-danger">
                    <i class="bi bi-trash me-2"></i> Eliminar
                </button>
                <button type="button" class="btn btn-success" onclick="guardarDatos()">
                    <i class="bi bi-save me-2"></i> Guardar Datos
                </button>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript modularizado -->
<script src="/js/estado-resultados.js"></script>
<script src="/js/balance-general.js"></script>
<script src="/js/flujo-operativo.js"></script>
<script src="/js/flujo-corporativo.js"></script>
<script src="/js/carga-mensual.js"></script>
